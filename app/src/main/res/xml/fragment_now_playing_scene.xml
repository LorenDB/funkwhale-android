<?xml version="1.0" encoding="utf-8"?>
<MotionScene
  xmlns:android="http://schemas.android.com/apk/res/android"
  xmlns:motion="http://schemas.android.com/apk/res-auto">

  <ConstraintSet android:id="@+id/start">
    <Constraint android:id="@id/now_playing_details_info">
      <PropertySet android:alpha="0" android:visibility="invisible" />
    </Constraint>
    <Constraint android:id="@id/header_controls">
      <PropertySet android:alpha="1" android:visibility="visible" />
    </Constraint>
    <Constraint android:id="@id/constraint_layout_placeholder">
      <PropertySet android:visibility="visible" />
    </Constraint>
    <!--
      I don't know why MotionLayout tries to control visibility for the buffer progress bar,
      but it's messing with its display…
    -->
    <ConstraintOverride
      android:id="@id/now_playing_buffering"
      motion:visibilityMode="ignore"
    />
  </ConstraintSet>

  <ConstraintSet android:id="@+id/end">
    <Constraint
      android:id="@id/now_playing_cover"
      motion:layout_constraintEnd_toEndOf="@id/detail_image_placeholder"
      motion:layout_constraintStart_toStartOf="@id/detail_image_placeholder"
      motion:layout_constraintTop_toBottomOf="@id/detail_image_placeholder"
      motion:layout_constraintTop_toTopOf="@id/detail_image_placeholder"
    />
    <!--
      I don't know why MotionLayout tries to control visibility for the buffer progress bar,
      but it's messing with its display…
    -->
    <ConstraintOverride
      android:id="@id/now_playing_buffering"
      motion:visibilityMode="ignore"
    />
    <Constraint android:id="@id/now_playing_progress">
      <PropertySet android:alpha="0" android:visibility="gone" />
    </Constraint>
    <Constraint android:id="@id/header_controls">
      <PropertySet android:alpha="0" android:visibility="invisible" />
    </Constraint>
    <Constraint android:id="@id/constraint_layout_placeholder">
      <PropertySet android:visibility="invisible" />
    </Constraint>
    <Constraint android:id="@id/now_playing_details_info">
      <PropertySet android:alpha="1" android:visibility="visible"/>
    </Constraint>
    <Constraint android:id="@id/controls">
      <PropertySet android:alpha="1" />
    </Constraint>
  </ConstraintSet>

  <Transition
    motion:constraintSetEnd="@id/end"
    motion:constraintSetStart="@+id/start"
    >
    <KeyFrameSet>
      <KeyPosition
        motion:percentX="1"
        motion:framePosition="50"
        motion:motionTarget="@id/now_playing_cover"
        motion:curveFit="spline"
      />

      <KeyPosition
        motion:percentX="1"
        motion:framePosition="50"
        motion:motionTarget="@id/now_playing_buffering"
        motion:curveFit="spline"
      />

      <KeyAttribute
        android:alpha="0"
        motion:framePosition="10"
        motion:motionTarget="@id/header_controls"
      />

      <KeyPosition
        motion:percentX="1"
        motion:framePosition="50"
        motion:motionTarget="@id/header_controls"
        motion:curveFit="spline"
      />

      <KeyAttribute
        android:alpha="0"
        motion:framePosition="10"
        motion:motionTarget="@id/now_playing_progress"
      />

      <KeyAttribute
        android:alpha="0"
        motion:framePosition="90"
        motion:motionTarget="@id/now_playing_details_info"
      />

      <KeyAttribute
        android:alpha="0"
        motion:framePosition="90"
        motion:motionTarget="@id/controls"
      />
    </KeyFrameSet>
  </Transition>
</MotionScene>
